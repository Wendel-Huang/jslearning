<!DOCTYPE html>
<html>
<head>
	<title>ballsnake</title>
	<meta charset="utf-8">
</head>
<body>
	<canvas id="can" width="800" height="1200" style="border:1px solid #aaa; margin: 20px auto; display: block;" ></canvas>
	<script type="text/javascript">
		var context=document.getElementById('can').getContext('2d');
		var ball={x:200,y:200,v:1,vx:0,vy:0,r:5,color:'blue'};
		var ax,ay,axy;

		window.ondevicemotion = function(e) {
            ax = event.accelerationIncludingGravity.x ;
			ay = event.accelerationIncludingGravity.y ; 
			axy=Math.sqrt(ax*ax+ay*ay);
			ball.vx=-ball.v*ax/axy;
			ball.vy=ball.v*ay/axy;
		};

		function update(){
			ball.x=ball.x+ball.vx;
			ball.y=ball.y+ball.vy;
		}
		function render(cxt){
			cxt.clearRect(0,0,cxt.canvas.width,cxt.canvas.height);

			cxt.fillStyle=ball.color;
			cxt.beginPath();
			cxt.arc(ball.x,ball.y,ball.r,0,2*Math.PI);
			cxt.closePath();

			cxt.fill();
		}
		window.onload=function(){
			setInterval(function(){
				update();
				render(context);
			},15)
		}
	</script>
</body>
</html>